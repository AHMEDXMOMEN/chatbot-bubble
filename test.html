<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>GPT Chat Bubble Test</title>
</head>
<body>
<div id="chat-bubble" style="position: fixed; bottom: 20px; right: 20px; background-color: #007bff; color: white; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 24px;">ðŸ’¬</div>

<div id="chat-box" style="position: fixed; bottom: 90px; right: 20px; width: 320px; height: 420px; background: white; border: 1px solid #ccc; border-radius: 10px; display: none; flex-direction: column; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  <div id="messages" style="flex: 1; padding: 10px; overflow-y: auto;"></div>
  <input id="user-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ..." style="border: none; border-top: 1px solid #ddd; padding: 10px; width: 100%;">
</div>

<script>
const bubble = document.getElementById('chat-bubble');
const chatBox = document.getElementById('chat-box');
const messages = document.getElementById('messages');
const input = document.getElementById('user-input');

bubble.onclick = () => {
  chatBox.style.display = chatBox.style.display === 'flex' ? 'none' : 'flex';
};

input.addEventListener('keypress', async (e) => {
  if (e.key === 'Enter' && input.value.trim()) {
    const msg = input.value;
    messages.innerHTML += `<div style="text-align:right; margin:5px 0;"><b>Ø£Ù†Øª:</b> ${msg}</div>`;
    input.value = '';

    const res = await fetch('https://your-chat.vercel.app/api/chat', { // Ø¶Ø¹ Ù„ÙŠÙ†Ùƒ Vercel Ù‡Ù†Ø§
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: msg })
    });

    const data = await res.json();
    const reply = data.output?.[0]?.content?.[0]?.text?.value || "Ø­Ø¯Ø« Ø®Ø·Ø£!";
    messages.innerHTML += `<div style="text-align:left; margin:5px 0;"><b>Bot:</b> ${reply}</div>`;
    messages.scrollTop = messages.scrollHeight;
  }
});
</script>
</body>
</html>
